{% extends "base.html" %}
{% block cssPath %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/management.css' %}"/>
<link rel="stylesheet" href="{% static 'css/userProfile.css' %}"/>
{% endblock %}
{% block title %} managementArea {% endblock %}
{% block body %}
<div class="managementAreaContainer">
	<div class="organiserDetails">
		<h2>{{ request.user }}</h2>
		<h3>email : {{ request.user.email }}</h3>
	{% if request.user.userprofile.is_organiser %}
    <Button id="createTournyBtn" class="createTournyBtn">CREATE TOURNAMENT</Button>
		<div id="formShow">
			<div class="formContainer">
				<form action="" method="post">
				<div id="closeCreateTournamentBtn" > 
					&#10060;
				</div>
				{% csrf_token %}
				{{ createTournamentForm.as_p }}
				<input type="submit" value="SUBMIT">
				</form>
			</div>
		{% endif %}
		</div>	
		<div class="teamContainer" style="margin:0 auto;width:95%;">
		{% if tournaments.count != 0 %}
		<H2>YOUR TOURNAMENTS</H2>
			<Table class ="teamTable">
				<thead>
					<tr>
						<td>TOURNAMENT NAME</td>
						<td>TOURNAMENT GAME</td>
						<td>TOTAL SLOTS</td>
					</tr>
				</thead>
				<tbody>
					{% for tourny in tournaments %}
						<tr>
							<td>{{ tourny.name }}</td>
							<td>{{ tourny.game }}</td>
							<td>{{ tourny.slots }}</td>
							<td><a href="{% url 'OrgViewTournament' tourny.id %}">View</a></td>
						</tr>
					{% endfor %}
				</tbody>
			</Table>
			{% else %}
				<h2> No Tournament Exist. Launch a Tournament.</h2>
			{% endif %}
			<div id="recived"></div>
		</div>
	</div>
</div>
{% endblock %}
{% block script %}
<script>
let createFromBtn = document.getElementById("createTournyBtn")
let OpenFormBtn = document.getElementById("createTournyBtn")
OpenFormBtn.addEventListener("click",showForm);

let CloseFormBtn = document.getElementById("closeCreateTournamentBtn")
CloseFormBtn.addEventListener("click",hideForm)

function showForm(){
	let form = document.getElementById("formShow")
	form.style.display = "block";
	createFromBtn.style.opacity = "0";
}
function hideForm(){
	let form = document.getElementById("formShow")
	form.style.display = "none";
	createFromBtn.style.opacity = "1";
}
</script>
{% endblock %}